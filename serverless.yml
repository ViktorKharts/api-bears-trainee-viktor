service: sls 

frameworkVersion: '2'

custom:
  settings:
    COLUMNS_TABLE: columns
    CARDS_TABLE: cards

provider:
  name: aws
  runtime: nodejs12.x
  lambdaHashingVersion: 20201221
  environment: ${self:custom.settings}
  region: us-east-2
  iamRoleStatements:
    - ${file(iam/DynamoDBIAM.yml):DynamoDBIAM}

resources:
  Resources:
    ColumnsTable: ${file(resources/ColumnsTable.yml):ColumnsTable}
    CardsTable: ${file(resources/CardsTable.yml):CardsTable}

functions:
  createColumn: ${file(functions/Columns.yml):createColumn}
  getColumns: ${file(functions/Columns.yml):getColumns}
  getColumnsByGSI: ${file(functions/Columns.yml):getColumnsByGSI}
  getColumn: ${file(functions/Columns.yml):getColumn}
  updateColumn: ${file(functions/Columns.yml):updateColumn}
  deleteColumn: ${file(functions/Columns.yml):deleteColumn}

  createCard: ${file(functions/Cards.yml):createCard}
  getCards: ${file(functions/Cards.yml):getCards}
  getCard: ${file(functions/Cards.yml):getCard}
  updateCard: ${file(functions/Cards.yml):updateCard}
  deleteCard: ${file(functions/Cards.yml):deleteCard}

plugins:
  - serverless-offline
  